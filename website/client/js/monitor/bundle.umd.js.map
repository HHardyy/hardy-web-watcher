{"version":3,"file":"bundle.umd.js","sources":["../../../../sdk/errorCatch.js","../../../../sdk/index.js"],"sourcesContent":["/*\r\n * @Author: 小方块 \r\n * @Date: 2022-03-07 02:10:37 \r\n * @Last Modified by: 小方块\r\n * @Last Modified time: 2022-03-18 14:39:55\r\n * \r\n * 报错抓取\r\n */\r\n\r\nconst formatError = (erroObj) => {\r\n  let _col = erroObj.column || erroObj.columnNumber\r\n  let _row = erroObj.line || erroObj.lineNumber\r\n  let _errType = erroObj.name\r\n  let _msg = erroObj.message\r\n\r\n  let { stack } = erroObj\r\n\r\n  if (stack) {\r\n    let _matchUrl = stack.match(/https?:\\/\\/[^\\n]+/)\r\n    let _urlFirstStack = _matchUrl ? _matchUrl[0] : ''\r\n\r\n    // 真正的url\r\n    let _resourceUrl = ''\r\n    let _regUrlCheck = /https?:\\/\\/(\\S)*\\.js/\r\n    if (_regUrlCheck.test(_urlFirstStack)) {\r\n      _resourceUrl = _urlFirstStack.match(_regUrlCheck)[0]\r\n    }\r\n\r\n    // 获取行列信息\r\n    let stackRow = null, stackCol = null, posStack = _urlFirstStack.match(/:(\\d+):(\\d+)/)\r\n    if (posStack && posStack.length >= 3) {\r\n      [, stackCol, stackRow] = posStack\r\n    }\r\n    return {\r\n      content: stack,\r\n      col: Number(_col || stackCol),\r\n      row: Number(_row || stackRow),\r\n      errType: _errType,\r\n      message: _msg,\r\n      resourceUrl: _resourceUrl\r\n    }\r\n  }\r\n}\r\n\r\nexport default {\r\n  init(cb) {\r\n    let _origin_error = window.onerror\r\n\r\n    // 普通代码报错\r\n    window.onerror = function (message, source, lineno, colno, error) {\r\n      let errInfo = formatError(error)\r\n      errInfo._message = message\r\n      errInfo._source = source\r\n      errInfo._lineno = lineno\r\n      errInfo._colno = colno\r\n      errInfo.type = 'error'\r\n      cb(errInfo)\r\n      _origin_error && _origin_error.apply(window, arguments)\r\n    }\r\n  }\r\n}","import perf from './perf.js'\r\nimport resource from './resource'\r\nimport xhr from './xhr'\r\nimport errCatch from './errorCatch'\r\n\r\n// perf.init((perfData) => {\r\n//   console.log('页面性能监控: ', perfData);\r\n// })\r\n\r\n// resource.init((resourceData) => {\r\n//   console.log('资源加载监控: ', resourceData);\r\n// })\r\n\r\n// xhr.init((xhrData) => {\r\n//   console.log('xhr || fetch 加载监控: ', xhrData);\r\n// })\r\n\r\nerrCatch.init((errData) => {\r\n  console.log('errData: ', errData);\r\n})"],"names":[],"mappings":";;;;;EAAA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;EACA,MAAM,WAAW,GAAG,CAAC,OAAO,KAAK;EACjC,EAAE,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,aAAY;EACnD,EAAE,IAAI,IAAI,GAAG,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC,WAAU;EAC/C,EAAE,IAAI,QAAQ,GAAG,OAAO,CAAC,KAAI;EAC7B,EAAE,IAAI,IAAI,GAAG,OAAO,CAAC,QAAO;AAC5B;EACA,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,QAAO;AACzB;EACA,EAAE,IAAI,KAAK,EAAE;EACb,IAAI,IAAI,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC,mBAAmB,EAAC;EACpD,IAAI,IAAI,cAAc,GAAG,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,GAAE;AACtD;EACA;EACA,IAAI,IAAI,YAAY,GAAG,GAAE;EACzB,IAAI,IAAI,YAAY,GAAG,uBAAsB;EAC7C,IAAI,IAAI,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE;EAC3C,MAAM,YAAY,GAAG,cAAc,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,EAAC;EAC1D,KAAK;AACL;EACA;EACA,IAAI,IAAI,QAAQ,GAAG,IAAI,EAAE,QAAQ,GAAG,IAAI,EAAE,QAAQ,GAAG,cAAc,CAAC,KAAK,CAAC,cAAc,EAAC;EACzF,IAAI,IAAI,QAAQ,IAAI,QAAQ,CAAC,MAAM,IAAI,CAAC,EAAE;EAC1C,MAAM,GAAG,QAAQ,EAAE,QAAQ,CAAC,GAAG,SAAQ;EACvC,KAAK;EACL,IAAI,OAAO;EACX,MAAM,OAAO,EAAE,KAAK;EACpB,MAAM,GAAG,EAAE,MAAM,CAAC,IAAI,IAAI,QAAQ,CAAC;EACnC,MAAM,GAAG,EAAE,MAAM,CAAC,IAAI,IAAI,QAAQ,CAAC;EACnC,MAAM,OAAO,EAAE,QAAQ;EACvB,MAAM,OAAO,EAAE,IAAI;EACnB,MAAM,WAAW,EAAE,YAAY;EAC/B,KAAK;EACL,GAAG;EACH,EAAC;AACD;AACA,iBAAe;EACf,EAAE,IAAI,CAAC,EAAE,EAAE;EACX,IAAI,IAAI,aAAa,GAAG,MAAM,CAAC,QAAO;AACtC;EACA;EACA,IAAI,MAAM,CAAC,OAAO,GAAG,UAAU,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE;EACtE,MAAM,IAAI,OAAO,GAAG,WAAW,CAAC,KAAK,EAAC;EACtC,MAAM,OAAO,CAAC,QAAQ,GAAG,QAAO;EAChC,MAAM,OAAO,CAAC,OAAO,GAAG,OAAM;EAC9B,MAAM,OAAO,CAAC,OAAO,GAAG,OAAM;EAC9B,MAAM,OAAO,CAAC,MAAM,GAAG,MAAK;EAC5B,MAAM,OAAO,CAAC,IAAI,GAAG,QAAO;EAC5B,MAAM,EAAE,CAAC,OAAO,EAAC;EACjB,MAAM,aAAa,IAAI,aAAa,CAAC,KAAK,CAAC,MAAM,EAAE,SAAS,EAAC;EAC7D,MAAK;EACL,GAAG;EACH;;ECvDA;EACA;EACA;AACA;EACA;EACA;EACA;AACA;EACA;EACA;EACA;AACA;EACA,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAO,KAAK;EAC3B,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;EACpC,CAAC;;;;;;"}